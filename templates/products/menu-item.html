{% extends 'base.html' %} {% block content %} {% load static %}

<link
  rel="stylesheet"
  type="text/css"
  href="{% static 'css/menu_item.css' %}"
/>
<script defer src="{% static 'js/menu_item.js' %}"></script>

<div class="pizza-container">
  <!-- Pizza deitail div1 -->
  <div class="pizza-details">
    <h1 class="pizza-name title">{{ product.name }}</h1>
    <div class="pizza-description text">{{ product.description }}</div>

    <div class="pizza-size text">
      <form
        class="radio-form"
        method="POST"
        id="add-to-cart-form"
        action="{% url 'add_to_cart' product.id %}?size=small"
      >
        {% csrf_token %}
        <label class="form-controle">
          <input
            type="radio"
            name="size"
            value="small"
            id="small-size"
            onclick="updateFormAction('small')"
          />
          <span>Small</span>
        </label>
        <label class="form-controle">
          <input
            type="radio"
            name="size"
            value="medium"
            id="medium-size"
            onclick="updateFormAction('medium')"
          />
          <span>Medium (+500)</span>
        </label>
        <label class="form-controle">
          <input
            type="radio"
            name="size"
            value="large"
            id="large-size"
            onclick="updateFormAction('large')"
          />
          <span>Large (+1000)</span>
        </label>
        <div class="pizza-quantity">
          <input
            type="number"
            name="quantity"
            class="quantity-input"
            value="1"
          />
          <button type="submit" class="add-to-cart-btn">Add to Cart</button>
        </div>
      </form>
    </div>
  </div>

    <div class="pizza-size text">  
    
      <form class="radio-form" method="POST" id="add-to-cart-form" action="{% url 'add_to_cart' product.id %}?size=small" >
        {% csrf_token %}  
        <label class="form-controle">
            <input type="radio" name="size" value="small" id="small-size" onclick="updateFormAction('small')" />
            <span>Small</span>
          </label>
          <label class="form-controle">
            <input type="radio" name="size" value="medium" id="medium-size" onclick="updateFormAction('medium')"/>
            <span>Medium (+500)</span>  
          </label>
          <label class="form-controle">
            <input type="radio" name="size" value="large" id="large-size" onclick="updateFormAction('large')"/>
            <span>Large (+1000)</span>   
          </label>
          <div class="pizza-quantity">
            <input type="number" name="quantity" class="quantity-input" value="1" />
            <button type="submit" class="add-to-cart-btn">Add to Cart</button>
          </div>
      </form>
    </div>


  </div>
  
  <!-- Picture div2 -->
  <div class="pizza-image">
    <img src="{{ product.images }}" alt="{{ product.name }}" />
  </div>
</div>
<script>
  function updateFormAction(size) {
    const form = document.getElementById("add-to-cart-form");
    const url = form.getAttribute("action");
    const newUrl = url.split("?")[0] + ?size=${size};
    form.setAttribute("action", newUrl);
  }
</script>
{% endblock %}
